#!/bin/bash

# ğŸ· Comando simples para atualizar templates de email do por.quinho
# Uso: export SUPABASE_ACCESS_TOKEN="seu-token" && export PROJECT_REF="seu-ref" && ./update-email-templates-simple.sh

echo "ğŸ· Atualizando templates de email do por.quinho..."

curl -X PATCH "https://api.supabase.com/v1/projects/$PROJECT_REF/config/auth" \
  -H "Authorization: Bearer $SUPABASE_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "mailer_subjects_confirmation": "ğŸ· Confirme seu cadastro no por.quinho",
    "mailer_templates_confirmation_content": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Confirme seu cadastro - por.quinho</title><style>@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\");body{margin:0;padding:0;font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background-color:#fdf2f8;line-height:1.6}.container{max-width:600px;margin:0 auto;padding:20px;background-color:#fdf2f8}.card{background-color:#fff;border-radius:16px;box-shadow:0 10px 25px rgba(236,72,153,0.1);overflow:hidden;border:1px solid #fce7f3}.header{background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);padding:40px 30px;text-align:center;color:#fff}.header h1{margin:0;font-size:28px;font-weight:700;margin-bottom:8px}.tagline{margin:0;font-size:14px;opacity:0.9;font-style:italic;font-weight:300}.body{padding:40px 30px}.body h2{color:#be185d;font-size:24px;font-weight:600;margin:0 0 20px 0;text-align:center}.body p{color:#374151;font-size:16px;margin:0 0 20px 0;text-align:center}.btn{display:block;background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);color:#fff!important;text-decoration:none;padding:16px 32px;border-radius:12px;font-weight:600;font-size:16px;text-align:center;margin:20px auto;width:fit-content;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.note{background-color:#fef3cd;border:1px solid #fbbf24;border-radius:8px;padding:16px;margin:20px 0}.note p{color:#92400e;font-size:14px;margin:0;text-align:left}.footer{background-color:#f9fafb;padding:30px;text-align:center;border-top:1px solid #f3f4f6}.footer p{color:#6b7280;font-size:14px;margin:0}@media only screen and (max-width:600px){.container{padding:10px}.header{padding:30px 20px}.body{padding:30px 20px}.footer{padding:20px}.header h1{font-size:24px}.body h2{font-size:20px}}</style></head><body><div class=\"container\"><div class=\"card\"><div class=\"header\"><h1>ğŸ· Bem-vindo ao por.quinho!</h1><p class=\"tagline\">De pouco em pouco se enche o porquinho</p></div><div class=\"body\"><h2>Confirme seu cadastro</h2><p>Estamos muito felizes em ter vocÃª conosco! ğŸ‰</p><p>Para comeÃ§ar sua jornada rumo Ã  independÃªncia financeira, precisamos confirmar seu email.</p><a href=\"{{ .ConfirmationURL }}\" class=\"btn\">âœ¨ Confirmar Email</a><div class=\"note\"><p><strong>ğŸ”’ SeguranÃ§a:</strong> Este link expira em 24 horas. Se vocÃª nÃ£o criou esta conta, pode ignorar este email.</p></div><p style=\"margin-top:30px\">Prepare-se para transformar sua vida financeira! Com o por.quinho, cada economia conta.</p></div><div class=\"footer\"><p>Â© 2024 por.quinho - De pouco em pouco se enche o porquinho</p><p>Uma forma inteligente de cuidar do seu dinheiro ğŸ·ğŸ’°</p></div></div></div></body></html>",
    
    "mailer_subjects_magic_link": "ğŸš€ Seu acesso rÃ¡pido ao por.quinho",
    "mailer_templates_magic_link_content": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Acesso rÃ¡pido - por.quinho</title><style>@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\");body{margin:0;padding:0;font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background-color:#fdf2f8;line-height:1.6}.container{max-width:600px;margin:0 auto;padding:20px;background-color:#fdf2f8}.card{background-color:#fff;border-radius:16px;box-shadow:0 10px 25px rgba(236,72,153,0.1);overflow:hidden;border:1px solid #fce7f3}.header{background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);padding:40px 30px;text-align:center;color:#fff}.header h1{margin:0;font-size:28px;font-weight:700;margin-bottom:8px}.tagline{margin:0;font-size:14px;opacity:0.9;font-style:italic;font-weight:300}.body{padding:40px 30px}.body h2{color:#be185d;font-size:24px;font-weight:600;margin:0 0 20px 0;text-align:center}.body p{color:#374151;font-size:16px;margin:0 0 20px 0;text-align:center}.btn{display:block;background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);color:#fff!important;text-decoration:none;padding:16px 32px;border-radius:12px;font-weight:600;font-size:16px;text-align:center;margin:20px auto;width:fit-content;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.note{background-color:#fef3cd;border:1px solid #fbbf24;border-radius:8px;padding:16px;margin:20px 0}.note p{color:#92400e;font-size:14px;margin:0;text-align:left}.footer{background-color:#f9fafb;padding:30px;text-align:center;border-top:1px solid #f3f4f6}.footer p{color:#6b7280;font-size:14px;margin:0}@media only screen and (max-width:600px){.container{padding:10px}.header{padding:30px 20px}.body{padding:30px 20px}.footer{padding:20px}.header h1{font-size:24px}.body h2{font-size:20px}}</style></head><body><div class=\"container\"><div class=\"card\"><div class=\"header\"><h1>ğŸ· Acesso rÃ¡pido ao por.quinho</h1><p class=\"tagline\">De pouco em pouco se enche o porquinho</p></div><div class=\"body\"><h2>Seu link mÃ¡gico chegou! âœ¨</h2><p>Clique no botÃ£o abaixo para acessar sua conta de forma segura:</p><a href=\"{{ .ConfirmationURL }}\" class=\"btn\">ğŸš€ Entrar no por.quinho</a><div class=\"note\"><p><strong>ğŸ”’ SeguranÃ§a:</strong> Este link Ã© Ãºnico e expira em 1 hora. Use apenas se vocÃª solicitou o acesso.</p></div><p style=\"margin-top:30px\">Continue cuidando bem do seu dinheiro! Cada centavo economizado nos deixa mais prÃ³ximos dos nossos sonhos. ğŸŒŸ</p></div><div class=\"footer\"><p>Â© 2024 por.quinho - De pouco em pouco se enche o porquinho</p><p>Sua jornada financeira simplificada ğŸ·ğŸ’°</p></div></div></div></body></html>",
    
    "mailer_subjects_recovery": "ğŸ”‘ Redefinir senha - por.quinho",
    "mailer_templates_recovery_content": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Redefinir senha - por.quinho</title><style>@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\");body{margin:0;padding:0;font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background-color:#fdf2f8;line-height:1.6}.container{max-width:600px;margin:0 auto;padding:20px;background-color:#fdf2f8}.card{background-color:#fff;border-radius:16px;box-shadow:0 10px 25px rgba(236,72,153,0.1);overflow:hidden;border:1px solid #fce7f3}.header{background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);padding:40px 30px;text-align:center;color:#fff}.header h1{margin:0;font-size:28px;font-weight:700;margin-bottom:8px}.tagline{margin:0;font-size:14px;opacity:0.9;font-style:italic;font-weight:300}.body{padding:40px 30px}.body h2{color:#be185d;font-size:24px;font-weight:600;margin:0 0 20px 0;text-align:center}.body p{color:#374151;font-size:16px;margin:0 0 20px 0;text-align:center}.btn{display:block;background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);color:#fff!important;text-decoration:none;padding:16px 32px;border-radius:12px;font-weight:600;font-size:16px;text-align:center;margin:20px auto;width:fit-content;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.note{background-color:#fef3cd;border:1px solid #fbbf24;border-radius:8px;padding:16px;margin:20px 0}.note p{color:#92400e;font-size:14px;margin:0;text-align:left}.footer{background-color:#f9fafb;padding:30px;text-align:center;border-top:1px solid #f3f4f6}.footer p{color:#6b7280;font-size:14px;margin:0}@media only screen and (max-width:600px){.container{padding:10px}.header{padding:30px 20px}.body{padding:30px 20px}.footer{padding:20px}.header h1{font-size:24px}.body h2{font-size:20px}}</style></head><body><div class=\"container\"><div class=\"card\"><div class=\"header\"><h1>ğŸ· Redefinir senha - por.quinho</h1><p class=\"tagline\">De pouco em pouco se enche o porquinho</p></div><div class=\"body\"><h2>RecuperaÃ§Ã£o de senha ğŸ”‘</h2><p>Esqueceu sua senha? NÃ£o se preocupe, isso acontece com todo mundo!</p><p>Clique no botÃ£o abaixo para criar uma nova senha e voltar a cuidar das suas finanÃ§as:</p><a href=\"{{ .ConfirmationURL }}\" class=\"btn\">ğŸ” Redefinir Senha</a><div class=\"note\"><p><strong>ğŸ”’ Importante:</strong> Este link expira em 1 hora. Se vocÃª nÃ£o solicitou esta recuperaÃ§Ã£o, pode ignorar este email - sua conta permanecerÃ¡ segura.</p></div><p style=\"margin-top:30px\">Dica: Escolha uma senha forte para manter seus dados financeiros sempre protegidos! ğŸ›¡ï¸</p></div><div class=\"footer\"><p>Â© 2024 por.quinho - De pouco em pouco se enche o porquinho</p><p>SeguranÃ§a e simplicidade em suas finanÃ§as ğŸ·ğŸ’°</p></div></div></div></body></html>",
    
    "mailer_subjects_invite": "ğŸ‰ VocÃª foi convidado para o por.quinho!",
    "mailer_templates_invite_content": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>VocÃª foi convidado - por.quinho</title><style>@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\");body{margin:0;padding:0;font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background-color:#fdf2f8;line-height:1.6}.container{max-width:600px;margin:0 auto;padding:20px;background-color:#fdf2f8}.card{background-color:#fff;border-radius:16px;box-shadow:0 10px 25px rgba(236,72,153,0.1);overflow:hidden;border:1px solid #fce7f3}.header{background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);padding:40px 30px;text-align:center;color:#fff}.header h1{margin:0;font-size:28px;font-weight:700;margin-bottom:8px}.tagline{margin:0;font-size:14px;opacity:0.9;font-style:italic;font-weight:300}.body{padding:40px 30px}.body h2{color:#be185d;font-size:24px;font-weight:600;margin:0 0 20px 0;text-align:center}.body p{color:#374151;font-size:16px;margin:0 0 20px 0;text-align:center}.btn{display:block;background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);color:#fff!important;text-decoration:none;padding:16px 32px;border-radius:12px;font-weight:600;font-size:16px;text-align:center;margin:20px auto;width:fit-content;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.note{background-color:#e0f2fe;border:1px solid #0ea5e9;border-radius:8px;padding:16px;margin:20px 0}.note p{color:#0c4a6e;font-size:14px;margin:0;text-align:left}.footer{background-color:#f9fafb;padding:30px;text-align:center;border-top:1px solid #f3f4f6}.footer p{color:#6b7280;font-size:14px;margin:0}@media only screen and (max-width:600px){.container{padding:10px}.header{padding:30px 20px}.body{padding:30px 20px}.footer{padding:20px}.header h1{font-size:24px}.body h2{font-size:20px}}</style></head><body><div class=\"container\"><div class=\"card\"><div class=\"header\"><h1>ğŸ· VocÃª foi convidado!</h1><p class=\"tagline\">De pouco em pouco se enche o porquinho</p></div><div class=\"body\"><h2>Junte-se ao por.quinho! ğŸ‰</h2><p>AlguÃ©m especial te convidou para descobrir uma nova forma de cuidar do dinheiro!</p><p>O por.quinho Ã© uma plataforma moderna que te ajuda a economizar e controlar seus gastos de forma simples e intuitiva.</p><a href=\"{{ .ConfirmationURL }}\" class=\"btn\">ğŸŒŸ Aceitar Convite</a><div class=\"note\"><p><strong>ğŸ Especial:</strong> Este convite Ã© exclusivo para vocÃª! Crie sua conta em {{ .SiteURL }} e comece a transformar sua vida financeira.</p></div><p style=\"margin-top:30px\">Vem fazer parte da nossa comunidade de pessoas que acreditam que pequenas economias fazem grandes diferenÃ§as! ğŸ’ª</p></div><div class=\"footer\"><p>Â© 2024 por.quinho - De pouco em pouco se enche o porquinho</p><p>Junte-se a quem jÃ¡ descobriu o segredo da economia inteligente ğŸ·ğŸ’°</p></div></div></div></body></html>",
    
    "mailer_subjects_email_change": "ğŸ“§ Confirme seu novo email - por.quinho",
    "mailer_templates_email_change_content": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Confirmar novo email - por.quinho</title><style>@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\");body{margin:0;padding:0;font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background-color:#fdf2f8;line-height:1.6}.container{max-width:600px;margin:0 auto;padding:20px;background-color:#fdf2f8}.card{background-color:#fff;border-radius:16px;box-shadow:0 10px 25px rgba(236,72,153,0.1);overflow:hidden;border:1px solid #fce7f3}.header{background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);padding:40px 30px;text-align:center;color:#fff}.header h1{margin:0;font-size:28px;font-weight:700;margin-bottom:8px}.tagline{margin:0;font-size:14px;opacity:0.9;font-style:italic;font-weight:300}.body{padding:40px 30px}.body h2{color:#be185d;font-size:24px;font-weight:600;margin:0 0 20px 0;text-align:center}.body p{color:#374151;font-size:16px;margin:0 0 20px 0;text-align:center}.btn{display:block;background:linear-gradient(135deg,#ec4899 0%,#be185d 100%);color:#fff!important;text-decoration:none;padding:16px 32px;border-radius:12px;font-weight:600;font-size:16px;text-align:center;margin:20px auto;width:fit-content;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.note{background-color:#fef3cd;border:1px solid #fbbf24;border-radius:8px;padding:16px;margin:20px 0}.note p{color:#92400e;font-size:14px;margin:0;text-align:left}.footer{background-color:#f9fafb;padding:30px;text-align:center;border-top:1px solid #f3f4f6}.footer p{color:#6b7280;font-size:14px;margin:0}@media only screen and (max-width:600px){.container{padding:10px}.header{padding:30px 20px}.body{padding:30px 20px}.footer{padding:20px}.header h1{font-size:24px}.body h2{font-size:20px}}</style></head><body><div class=\"container\"><div class=\"card\"><div class=\"header\"><h1>ğŸ· Confirmar novo email</h1><p class=\"tagline\">De pouco em pouco se enche o porquinho</p></div><div class=\"body\"><h2>Atualizando seu email ğŸ“§</h2><p>VocÃª solicitou a alteraÃ§Ã£o do email da sua conta no por.quinho.</p><p>Para confirmar este novo endereÃ§o de email, clique no botÃ£o abaixo:</p><a href=\"{{ .ConfirmationURL }}\" class=\"btn\">âœ… Confirmar Novo Email</a><div class=\"note\"><p><strong>ğŸ”’ VerificaÃ§Ã£o:</strong> Esta confirmaÃ§Ã£o expira em 24 horas. Se vocÃª nÃ£o solicitou esta mudanÃ§a, entre em contato conosco imediatamente.</p></div><p style=\"margin-top:30px\">Mantenha seus dados sempre atualizados para receber as melhores dicas de economia! ğŸ“ˆ</p></div><div class=\"footer\"><p>Â© 2024 por.quinho - De pouco em pouco se enche o porquinho</p><p>Seus dados seguros, sua economia crescendo ğŸ·ğŸ’°</p></div></div></div></body></html>"
  }' && echo -e "\nâœ… Templates atualizados com sucesso!" || echo -e "\nâŒ Erro ao atualizar templates"
